<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ala-Eh - Submit Complaint</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        let currentStep = 1;
        
        function nextStep() {
            if (currentStep === 1) {
                const category = document.getElementById('category').value;
                const description = document.getElementById('description').value;
                
                if (!category) {
                    alert('Please select a category');
                    return;
                }
                if (description.length < 20) {
                    alert('Description must be at least 20 characters');
                    return;
                }
            }
            
            if (currentStep === 2) {
                const location = document.getElementById('location').value;
                if (!location) {
                    alert('Please provide a location');
                    return;
                }
            }
            
            if (currentStep < 3) {
                document.getElementById('step-' + currentStep).style.display = 'none';
                currentStep++;
                document.getElementById('step-' + currentStep).style.display = 'block';
                updateStepper();
            }
        }
        
        function prevStep() {
            if (currentStep > 1) {
                document.getElementById('step-' + currentStep).style.display = 'none';
                currentStep--;
                document.getElementById('step-' + currentStep).style.display = 'block';
                updateStepper();
            }
        }
        
        function updateStepper() {
            for (let i = 1; i <= 3; i++) {
                const circle = document.getElementById('circle-' + i);
                if (i <= currentStep) {
                    circle.classList.add('active');
                } else {
                    circle.classList.remove('active');
                }
            }
        }
        
        function useGPS() {
            document.getElementById('location').value = 'Current location (14.5995, 120.9842)';
        }
        
        function submitComplaint() {
            alert('Complaint submitted successfully! ID: CMP-009');
            window.location.href = 'resident-dashboard.html';
        }
    </script>
</head>
<body>
    <div class="min-h-screen bg-gradient">
        <!-- Header -->
        <header class="header">
            <div class="container header-content">
                <a href="resident-dashboard.html" class="btn btn-ghost">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem;">
                        <path d="m12 19-7-7 7-7"></path>
                        <path d="M19 12H5"></path>
                    </svg>
                    Back
                </a>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container" style="max-width: 48rem; padding-top: 2rem; padding-bottom: 2rem;">
            <div class="mb-8">
                <h1>Submit New Complaint</h1>
                <p class="text-muted">Help us improve the community by reporting issues</p>
            </div>

            <!-- Stepper -->
            <div class="stepper">
                <div class="stepper-step">
                    <div id="circle-1" class="stepper-circle active">1</div>
                    <span class="stepper-label">Details</span>
                </div>
                <div class="stepper-step">
                    <div id="circle-2" class="stepper-circle">2</div>
                    <span class="stepper-label">Location</span>
                </div>
                <div class="stepper-step">
                    <div id="circle-3" class="stepper-circle">3</div>
                    <span class="stepper-label">Media</span>
                </div>
            </div>

            <!-- Step 1: Details -->
            <div id="step-1" class="card">
                <div class="card-header">
                    <div class="card-title">Complaint Details</div>
                    <div class="card-description">Provide details about the issue you want to report</div>
                </div>
                <div class="card-content space-y-4">
                    <div class="space-y-2">
                        <label class="label" for="category">Category *</label>
                        <select class="select" id="category" required>
                            <option value="">Select a category</option>
                            <option value="infrastructure">Infrastructure</option>
                            <option value="environment">Environment</option>
                            <option value="public-services">Public Services</option>
                            <option value="traffic">Traffic & Transportation</option>
                            <option value="utilities">Utilities</option>
                            <option value="health">Health</option>
                            <option value="safety">Safety</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="space-y-2">
                        <label class="label" for="description">Detailed Description *</label>
                        <textarea class="textarea" id="description" placeholder="Describe the issue in detail. Include when you noticed it, how it affects you, and any other relevant information..." style="min-height: 128px;" required></textarea>
                        <div class="flex justify-between text-xs text-muted">
                            <span id="char-count">0 characters</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 2: Location -->
            <div id="step-2" class="card" style="display: none;">
                <div class="card-header">
                    <div class="card-title">Location Information</div>
                    <div class="card-description">Help us locate the problem</div>
                </div>
                <div class="card-content space-y-4">
                    <div class="space-y-2">
                        <label class="label" for="location">Location Address *</label>
                        <div class="input-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                            <input class="input" id="location" placeholder="Enter street address, barangay, landmarks..." required>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <div style="flex: 1; height: 1px; background: var(--border);"></div>
                        <span class="text-sm text-muted">or</span>
                        <div style="flex: 1; height: 1px; background: var(--border);"></div>
                    </div>
                    <button type="button" class="btn btn-outline btn-full" onclick="useGPS()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem;">
                            <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                        Use My Current Location (GPS)
                    </button>
                    <div class="bg-muted rounded border-2" style="aspect-ratio: 16/9; display: flex; align-items: center; justify-content: center; border-style: dashed; border-color: var(--border);">
                        <div class="text-center">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--muted-foreground); margin: 0 auto 0.5rem;">
                                <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                            <p class="text-sm text-muted">Map preview will appear here</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Media -->
            <div id="step-3" class="card" style="display: none;">
                <div class="card-header">
                    <div class="card-title">Attach Media (Optional)</div>
                    <div class="card-description">Add photos or videos to support your complaint</div>
                </div>
                <div class="card-content space-y-4">
                    <div>
                        <label class="label">Upload Photos/Videos</label>
                        <p class="text-sm text-muted mb-3">Add visual evidence to support your complaint (up to 5 files)</p>
                    </div>
                    <div class="grid gap-3" style="grid-template-columns: repeat(2, 1fr);">
                        <button type="button" class="btn btn-outline flex-col" style="height: 128px; flex-direction: column;">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-bottom: 0.5rem;">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            <span class="text-sm">Upload File</span>
                        </button>
                        <button type="button" class="btn btn-outline flex-col" style="height: 128px; flex-direction: column;">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-bottom: 0.5rem;">
                                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                                <circle cx="12" cy="13" r="4"></circle>
                            </svg>
                            <span class="text-sm">Take Photo</span>
                        </button>
                    </div>
                    <div class="space-y-3" style="padding-top: 1rem; border-top: 1px solid var(--border);">
                        <p class="text-sm">Notification Preferences</p>
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="email-notif" checked>
                            <label for="email-notif" class="text-sm flex items-center gap-2">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                                    <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                </svg>
                                Send me email updates on this complaint
                            </label>
                        </div>
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="sms-notif">
                            <label for="sms-notif" class="text-sm flex items-center gap-2">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                </svg>
                                Send me SMS updates on this complaint
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex gap-3 mt-6">
                <button type="button" id="back-btn" class="btn btn-outline" onclick="prevStep()" style="display: none;">Previous</button>
                <button type="button" id="next-btn" class="btn btn-primary" onclick="nextStep()" style="flex: 1;">Next Step</button>
                <button type="button" id="submit-btn" class="btn btn-primary" onclick="submitComplaint()" style="flex: 1; display: none;">Submit Complaint</button>
            </div>
        </main>
    </div>

    <script>
        document.getElementById('description').addEventListener('input', function() {
            document.getElementById('char-count').textContent = this.value.length + ' characters';
        });
        
        // Update button visibility based on step
        const originalNext = nextStep;
        nextStep = function() {
            originalNext();
            if (currentStep === 2) {
                document.getElementById('back-btn').style.display = 'block';
            }
            if (currentStep === 3) {
                document.getElementById('next-btn').style.display = 'none';
                document.getElementById('submit-btn').style.display = 'block';
            }
        };
        
        const originalPrev = prevStep;
        prevStep = function() {
            originalPrev();
            if (currentStep === 1) {
                document.getElementById('back-btn').style.display = 'none';
            }
            if (currentStep === 2) {
                document.getElementById('next-btn').style.display = 'block';
                document.getElementById('submit-btn').style.display = 'none';
            }
        };
    </script>
</body>
</html>
